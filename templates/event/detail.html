{% extends "base.html" %}

{% block title %}{{ event.name }}{% endblock %}

{% block content %}
<h1>{{ event.name }}</h1>

<div>{{ event.description }}</div>

<dl>
  <dt>日時</dt>
  <dd>{{ event.started_at }} - {{ event.ended_at }}</dd>

  <dt>定員</dt>
  <dd>{{ event.member_limit }}人</dd>

  <dt>会場</dt>
  <dd>{{ event.place }}({{ event.address }})</dd>

  <dt>ハッシュタグ</dt>
  <dd>{{ event.hashtag }}</dd>

  <dt>管理者</dt>
  <dd>{{ event.user.nickname }}</dd>
</dl>

<div>{{ body }}</div>

{% if request.account == event.user %}
<a href="{% url event:edit event.id %}">編集</a> |
<a href="{% url event:delete event.id %}">削除</a>
{% endif %}

<h2>参加者</h2>

<div class="participants">
  {% for participant in event.participation_set.all %}
  <div class="participant">
    {{ forloop.counter }}. <span class="username">{{ participant.user.username }}</span>
    <div class="comment">{{ participant.comment }}</div>
  </div>
  {% endfor %}
</div>

{% if request.account not in event.participants.all %}
<form action="{% url event:participate event.id %}" method="POST">
  {{ participate_form.as_p }}
  <input type="submit" name="participate" value="参加"/>
  {% csrf_token %}
</form>
{% endif %}

{% endblock %}
